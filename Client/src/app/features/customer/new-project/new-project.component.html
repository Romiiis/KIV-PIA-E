<div class="dialog-wrapper">

  <h2 mat-dialog-title>
    <span class="title-icon">✨</span>
    {{ "createProjectModal.title" | translate }}
  </h2>

  <mat-dialog-content>
    <p class="subtitle">
      {{ "createProjectModal.subtitle" | translate }}
    </p>
    <form [formGroup]="projectForm">

      <div class="form-section">
        <label class="section-label">{{ "createProjectModal.uploadLabel" | translate }}</label>
        <div class="form-group file-group">

          <button type="button" class="file-upload-button" (click)="fileInput.click()" mat-stroked-button>
            <span class="icon">{{ projectForm.get('file')?.value ? '✅' : '⬆️' }}</span>
            <span
              class="label">{{ projectForm.get('file')?.value?.name || ('createProjectModal.dragDrop' | translate) }}</span>
          </button>

          <input hidden #fileInput type="file" (change)="onFileSelected($event)">

          @if (projectForm.get('file')?.hasError('required') && projectForm.get('file')?.touched) {
            <div class="error-message">{{ "createProjectModal.sourceRequired" | translate }}</div>
          }
        </div>
      </div>

      <div class="form-section">
        <label class="section-label">{{ "createProjectModal.targetLanguageLabel" | translate }}</label>
        <div class="form-group lang-group">
          <app-language-select
            formControlName="targetLang"
            [isMulti]="false" [placeholder]="'createProjectModal.languagePlaceholder' | translate"
          ></app-language-select>
        </div>
      </div>

    </form>
  </mat-dialog-content>

  <mat-dialog-actions align="end">
    <button mat-button (click)="onCancel()">
      {{ "createProjectModal.cancelButton" | translate }}
    </button>
    <button
      mat-flat-button
      class="submit-button"
      [disabled]="projectForm.invalid || isLoading"
      (click)="submitProject()">
      @if (!isLoading) {
        <span> {{ "createProjectModal.submitButton" | translate }}</span>
      } @else {
        <mat-spinner [diameter]="24" color="accent"></mat-spinner>
      }

    </button>
  </mat-dialog-actions>
</div>
